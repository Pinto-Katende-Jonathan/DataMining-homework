<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Analyse (TRAVAIL PRATIQUE DU COURS DE DATAMINING)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="analyse_files/libs/clipboard/clipboard.min.js"></script>
<script src="analyse_files/libs/quarto-html/quarto.js"></script>
<script src="analyse_files/libs/quarto-html/popper.min.js"></script>
<script src="analyse_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="analyse_files/libs/quarto-html/anchor.min.js"></script>
<link href="analyse_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="analyse_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="analyse_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="analyse_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="analyse_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analyse (TRAVAIL PRATIQUE DU COURS DE DATAMINING)</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<hr>
<section id="libraries" class="level3">
<h3 class="anchored" data-anchor-id="libraries">Libraries</h3>
<section id="installation" class="level4">
<h4 class="anchored" data-anchor-id="installation">Installation</h4>
<div id="cell-4" class="cell" data-execution_count="111">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># %pip install pandas</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># %pip install --upgrade pip</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># %pip install polars</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># %pip install matplotlib plotly</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># %pip install fastexcel</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># %pip install pyarrow</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># %pip install openpyxl</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># %pip install seaborn</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># %pip install scikit-learn</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># %pip install statsmodels</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importation-des-librairies" class="level4">
<h4 class="anchored" data-anchor-id="importation-des-librairies">Importation des librairies</h4>
<div id="cell-6" class="cell" data-execution_count="159">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd <span class="co"># type: ignore</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> polars <span class="im">as</span> pl</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LogisticRegression</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score, classification_report</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> LabelEncoder</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> statsmodels.api <span class="im">as</span> sm</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.stats.outliers_influence <span class="im">import</span> variance_inflation_factor</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-cleaning-preprocessing" class="level4">
<h4 class="anchored" data-anchor-id="data-cleaning-preprocessing">Data Cleaning &amp; Preprocessing</h4>
<hr>
<div id="cell-8" class="cell" data-execution_count="113">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>data_pl <span class="op">=</span> pl.read_excel(<span class="st">"data.xlsx"</span>) <span class="co"># with Polars</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>data_pd <span class="op">=</span> pd.read_excel(<span class="st">"data.xlsx"</span>) <span class="co"># With Pandas</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>ctx <span class="op">=</span> pl.SQLContext(data<span class="op">=</span>data_pl, eager<span class="op">=</span><span class="va">True</span>) <span class="co"># For SQL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-9" class="cell" data-execution_count="114">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data_pl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (5_744, 19)
┌───────────┬───────┬──────────────┬──────────────┬───┬─────────┬──────────┬───────────┬────────┐
│ CATEGORIE ┆ GRADE ┆ DERNIER      ┆ SALAIRE PERS ┆ … ┆ ENERGIE ┆ IFT      ┆ IDP       ┆ IPM    │
│ ---       ┆ ---   ┆ AVACEMENT EN ┆ ---          ┆   ┆ ---     ┆ ---      ┆ ---       ┆ ---    │
│ str       ┆ str   ┆ GRADE        ┆ f64          ┆   ┆ i64     ┆ f64      ┆ f64       ┆ i64    │
│           ┆       ┆ ---          ┆              ┆   ┆         ┆          ┆           ┆        │
│           ┆       ┆ date         ┆              ┆   ┆         ┆          ┆           ┆        │
╞═══════════╪═══════╪══════════════╪══════════════╪═══╪═════════╪══════════╪═══════════╪════════╡
│ M&amp;C       ┆ 11    ┆ 1998-07-01   ┆ 47865.44225  ┆ … ┆ 12045   ┆ 97837.51 ┆ 126115.18 ┆ 348500 │
│ M&amp;C       ┆ 11    ┆ 1998-09-01   ┆ 47652.18334  ┆ … ┆ 12045   ┆ 97837.51 ┆ 126115.18 ┆ 348500 │
│ M&amp;C       ┆ 11    ┆ 2000-08-01   ┆ 47348.71096  ┆ … ┆ 12045   ┆ 97837.51 ┆ 126115.18 ┆ 348500 │
│ M&amp;C       ┆ 11    ┆ 2000-10-01   ┆ 47115.68266  ┆ … ┆ 12045   ┆ 97837.51 ┆ 126115.18 ┆ 348500 │
│ M&amp;C       ┆ 11    ┆ 2000-12-01   ┆ 47344.56758  ┆ … ┆ 12045   ┆ 97837.51 ┆ 126115.18 ┆ 348500 │
│ …         ┆ …     ┆ …            ┆ …            ┆ … ┆ …       ┆ …        ┆ …         ┆ …      │
│ EXE       ┆ 71    ┆ 2023-11-01   ┆ 4920.44077   ┆ … ┆ 5940    ┆ 67568.84 ┆ 46635.93  ┆ 342500 │
│ EXE       ┆ 71    ┆ 2023-11-01   ┆ 4920.44077   ┆ … ┆ 5940    ┆ 67568.84 ┆ 46635.93  ┆ 342500 │
│ EXE       ┆ 71    ┆ 2023-11-01   ┆ 4920.44077   ┆ … ┆ 5940    ┆ 67568.84 ┆ 46635.93  ┆ 342500 │
│ EXE       ┆ 61    ┆ 2023-11-01   ┆ 4913.62077   ┆ … ┆ 5940    ┆ 67278.84 ┆ 46413.51  ┆ 342500 │
│ EXE       ┆ 61    ┆ 2023-11-01   ┆ 4913.62077   ┆ … ┆ 5940    ┆ 67278.84 ┆ 46413.51  ┆ 342500 │
└───────────┴───────┴──────────────┴──────────────┴───┴─────────┴──────────┴───────────┴────────┘</code></pre>
</div>
</div>
<div id="cell-10" class="cell" data-execution_count="115">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data_pd.info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 5744 entries, 0 to 5743
Data columns (total 19 columns):
 #   Column                      Non-Null Count  Dtype         
---  ------                      --------------  -----         
 0   CATEGORIE                   5744 non-null   object        
 1   GRADE                       5744 non-null   int64         
 2   DERNIER AVACEMENT EN GRADE  5742 non-null   datetime64[ns]
 3   SALAIRE PERS                5744 non-null   float64       
 4   CITE                        5744 non-null   object        
 5   SEXE                        5744 non-null   object        
 6   ETATCIVIL                   5678 non-null   object        
 7   INDEPOUSE                   5534 non-null   float64       
 8   ENFANT                      5744 non-null   int64         
 9   COTATION                    2536 non-null   float64       
 10  DATENAISSA                  5744 non-null   datetime64[ns]
 11  DATEENGAGE                  5744 non-null   datetime64[ns]
 12  TRP                         5744 non-null   float64       
 13  LGT                         5744 non-null   float64       
 14  SSANTE                      5744 non-null   float64       
 15  ENERGIE                     5744 non-null   int64         
 16  IFT                         5744 non-null   float64       
 17  IDP                         5744 non-null   float64       
 18  IPM                         5744 non-null   int64         
dtypes: datetime64[ns](3), float64(8), int64(4), object(4)
memory usage: 852.8+ KB</code></pre>
</div>
</div>
<div id="cell-11" class="cell" data-execution_count="116">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>ctx.execute(<span class="st">"SELECT * FROM data LIMIT 6"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="116">
<div><style>
.dataframe > thead > tr,
.dataframe > tbody > tr {
  text-align: right;
  white-space: pre-wrap;
}
</style>
<small>shape: (6, 19)</small>
<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">CATEGORIE</th>
<th data-quarto-table-cell-role="th">GRADE</th>
<th data-quarto-table-cell-role="th">DERNIER AVACEMENT EN GRADE</th>
<th data-quarto-table-cell-role="th">SALAIRE PERS</th>
<th data-quarto-table-cell-role="th">CITE</th>
<th data-quarto-table-cell-role="th">SEXE</th>
<th data-quarto-table-cell-role="th">ETATCIVIL</th>
<th data-quarto-table-cell-role="th">INDEPOUSE</th>
<th data-quarto-table-cell-role="th">ENFANT</th>
<th data-quarto-table-cell-role="th">COTATION</th>
<th data-quarto-table-cell-role="th">DATENAISSA</th>
<th data-quarto-table-cell-role="th">DATEENGAGE</th>
<th data-quarto-table-cell-role="th">TRP</th>
<th data-quarto-table-cell-role="th">LGT</th>
<th data-quarto-table-cell-role="th">SSANTE</th>
<th data-quarto-table-cell-role="th">ENERGIE</th>
<th data-quarto-table-cell-role="th">IFT</th>
<th data-quarto-table-cell-role="th">IDP</th>
<th data-quarto-table-cell-role="th">IPM</th>
</tr>
<tr class="odd">
<th>str</th>
<th>str</th>
<th>date</th>
<th>f64</th>
<th>str</th>
<th>str</th>
<th>str</th>
<th>str</th>
<th>i64</th>
<th>str</th>
<th>date</th>
<th>date</th>
<th>f64</th>
<th>f64</th>
<th>f64</th>
<th>i64</th>
<th>f64</th>
<th>f64</th>
<th>i64</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>"M&amp;C"</td>
<td>"11"</td>
<td>1998-07-01</td>
<td>47865.44225</td>
<td>"06"</td>
<td>"M"</td>
<td>"4"</td>
<td>"1"</td>
<td>0</td>
<td>"64"</td>
<td>1950-06-02</td>
<td>1968-09-01</td>
<td>124800.0</td>
<td>91627.03</td>
<td>270515.44</td>
<td>12045</td>
<td>97837.51</td>
<td>126115.18</td>
<td>348500</td>
</tr>
<tr class="even">
<td>"M&amp;C"</td>
<td>"11"</td>
<td>1998-09-01</td>
<td>47652.18334</td>
<td>"05"</td>
<td>"M"</td>
<td>"0"</td>
<td>"0"</td>
<td>0</td>
<td>"68"</td>
<td>1954-01-01</td>
<td>1980-04-14</td>
<td>124800.0</td>
<td>91627.03</td>
<td>270515.44</td>
<td>12045</td>
<td>97837.51</td>
<td>126115.18</td>
<td>348500</td>
</tr>
<tr class="odd">
<td>"M&amp;C"</td>
<td>"11"</td>
<td>2000-08-01</td>
<td>47348.71096</td>
<td>"06"</td>
<td>"M"</td>
<td>"4"</td>
<td>"1"</td>
<td>0</td>
<td>"67"</td>
<td>1960-02-02</td>
<td>1987-12-14</td>
<td>124800.0</td>
<td>91627.03</td>
<td>270515.44</td>
<td>12045</td>
<td>97837.51</td>
<td>126115.18</td>
<td>348500</td>
</tr>
<tr class="even">
<td>"M&amp;C"</td>
<td>"11"</td>
<td>2000-10-01</td>
<td>47115.68266</td>
<td>"01"</td>
<td>"M"</td>
<td>"4"</td>
<td>"1"</td>
<td>0</td>
<td>"63"</td>
<td>1953-01-15</td>
<td>1977-08-15</td>
<td>124800.0</td>
<td>91627.03</td>
<td>270515.44</td>
<td>12045</td>
<td>97837.51</td>
<td>126115.18</td>
<td>348500</td>
</tr>
<tr class="odd">
<td>"M&amp;C"</td>
<td>"11"</td>
<td>2000-12-01</td>
<td>47344.56758</td>
<td>"02"</td>
<td>"M"</td>
<td>"4"</td>
<td>"1"</td>
<td>1</td>
<td>"65"</td>
<td>1963-05-24</td>
<td>1987-12-14</td>
<td>124800.0</td>
<td>91627.03</td>
<td>270515.44</td>
<td>12045</td>
<td>97837.51</td>
<td>126115.18</td>
<td>348500</td>
</tr>
<tr class="even">
<td>"M&amp;C"</td>
<td>"11"</td>
<td>2001-07-01</td>
<td>47141.68761</td>
<td>"06"</td>
<td>"M"</td>
<td>"4"</td>
<td>"1"</td>
<td>0</td>
<td>"64"</td>
<td>1950-01-08</td>
<td>1980-08-11</td>
<td>124800.0</td>
<td>91627.03</td>
<td>270515.44</td>
<td>12045</td>
<td>97837.51</td>
<td>126115.18</td>
<td>348500</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="cell-12" class="cell" data-execution_count="117">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> data_pl.select(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">'DATENAISSA'</span>),</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">'DATEENGAGE'</span>),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    ((pl.col(<span class="st">"DATEENGAGE"</span>) <span class="op">-</span> pl.col(<span class="st">'DATENAISSA'</span>)).cast(pl.Duration) <span class="op">/</span> pl.duration(days<span class="op">=</span><span class="fl">365.25</span>)).cast(pl.Int32).alias(<span class="st">"Age à l'engagement"</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher le résultat</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (5_744, 3)
┌────────────┬────────────┬────────────────────┐
│ DATENAISSA ┆ DATEENGAGE ┆ Age à l'engagement │
│ ---        ┆ ---        ┆ ---                │
│ date       ┆ date       ┆ i32                │
╞════════════╪════════════╪════════════════════╡
│ 1950-06-02 ┆ 1968-09-01 ┆ 18                 │
│ 1954-01-01 ┆ 1980-04-14 ┆ 26                 │
│ 1960-02-02 ┆ 1987-12-14 ┆ 27                 │
│ 1953-01-15 ┆ 1977-08-15 ┆ 24                 │
│ 1963-05-24 ┆ 1987-12-14 ┆ 24                 │
│ …          ┆ …          ┆ …                  │
│ 1990-05-15 ┆ 2023-11-01 ┆ 33                 │
│ 2000-05-05 ┆ 2023-11-01 ┆ 23                 │
│ 1997-04-12 ┆ 2023-11-01 ┆ 26                 │
│ 1988-02-06 ┆ 2023-11-01 ┆ 35                 │
│ 1991-04-18 ┆ 2023-11-01 ┆ 32                 │
└────────────┴────────────┴────────────────────┘</code></pre>
</div>
</div>
</section>
<section id="création-des-nouvelles-variables" class="level4">
<h4 class="anchored" data-anchor-id="création-des-nouvelles-variables">Création des nouvelles variables</h4>
<p>Sur base des données existantes, nous pouvons créer deux nouvelles colonnes : 1. <strong>Age à l’engagement</strong> : Différence entre l’année d’engagement et l’année de naissance 2. <strong>Tranche d’âge</strong></p>
<div id="cell-14" class="cell" data-execution_count="118">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>data_pl_new <span class="op">=</span> data_pl.with_columns(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    age_engagement <span class="op">=</span> ((pl.col(<span class="st">"DATEENGAGE"</span>) <span class="op">-</span> pl.col(<span class="st">'DATENAISSA'</span>)).cast(pl.Duration) <span class="op">/</span> pl.duration(days<span class="op">=</span><span class="fl">365.25</span>)).cast(pl.Int32).alias(<span class="st">"Age à l'engagement"</span>)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-15" class="cell" data-execution_count="119">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data_pl_new)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (5_744, 20)
┌───────────┬───────┬──────────────┬─────────────┬───┬──────────┬───────────┬────────┬─────────────┐
│ CATEGORIE ┆ GRADE ┆ DERNIER      ┆ SALAIRE     ┆ … ┆ IFT      ┆ IDP       ┆ IPM    ┆ age_engagem │
│ ---       ┆ ---   ┆ AVACEMENT EN ┆ PERS        ┆   ┆ ---      ┆ ---       ┆ ---    ┆ ent         │
│ str       ┆ str   ┆ GRADE        ┆ ---         ┆   ┆ f64      ┆ f64       ┆ i64    ┆ ---         │
│           ┆       ┆ ---          ┆ f64         ┆   ┆          ┆           ┆        ┆ i32         │
│           ┆       ┆ date         ┆             ┆   ┆          ┆           ┆        ┆             │
╞═══════════╪═══════╪══════════════╪═════════════╪═══╪══════════╪═══════════╪════════╪═════════════╡
│ M&amp;C       ┆ 11    ┆ 1998-07-01   ┆ 47865.44225 ┆ … ┆ 97837.51 ┆ 126115.18 ┆ 348500 ┆ 18          │
│ M&amp;C       ┆ 11    ┆ 1998-09-01   ┆ 47652.18334 ┆ … ┆ 97837.51 ┆ 126115.18 ┆ 348500 ┆ 26          │
│ M&amp;C       ┆ 11    ┆ 2000-08-01   ┆ 47348.71096 ┆ … ┆ 97837.51 ┆ 126115.18 ┆ 348500 ┆ 27          │
│ M&amp;C       ┆ 11    ┆ 2000-10-01   ┆ 47115.68266 ┆ … ┆ 97837.51 ┆ 126115.18 ┆ 348500 ┆ 24          │
│ M&amp;C       ┆ 11    ┆ 2000-12-01   ┆ 47344.56758 ┆ … ┆ 97837.51 ┆ 126115.18 ┆ 348500 ┆ 24          │
│ …         ┆ …     ┆ …            ┆ …           ┆ … ┆ …        ┆ …         ┆ …      ┆ …           │
│ EXE       ┆ 71    ┆ 2023-11-01   ┆ 4920.44077  ┆ … ┆ 67568.84 ┆ 46635.93  ┆ 342500 ┆ 33          │
│ EXE       ┆ 71    ┆ 2023-11-01   ┆ 4920.44077  ┆ … ┆ 67568.84 ┆ 46635.93  ┆ 342500 ┆ 23          │
│ EXE       ┆ 71    ┆ 2023-11-01   ┆ 4920.44077  ┆ … ┆ 67568.84 ┆ 46635.93  ┆ 342500 ┆ 26          │
│ EXE       ┆ 61    ┆ 2023-11-01   ┆ 4913.62077  ┆ … ┆ 67278.84 ┆ 46413.51  ┆ 342500 ┆ 35          │
│ EXE       ┆ 61    ┆ 2023-11-01   ┆ 4913.62077  ┆ … ┆ 67278.84 ┆ 46413.51  ┆ 342500 ┆ 32          │
└───────────┴───────┴──────────────┴─────────────┴───┴──────────┴───────────┴────────┴─────────────┘</code></pre>
</div>
</div>
<section id="création-de-la-tranche-dâge" class="level5">
<h5 class="anchored" data-anchor-id="création-de-la-tranche-dâge">Création de la tranche d’âge</h5>
<div id="cell-17" class="cell" data-execution_count="120">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Conversion du format polars vers Pandas</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>data_pd <span class="op">=</span> data_pl_new.to_pandas()</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>bins <span class="op">=</span> [<span class="dv">13</span>, <span class="dv">18</span>, <span class="dv">23</span>, <span class="dv">28</span>, <span class="dv">33</span>, <span class="dv">38</span>, <span class="dv">43</span>, <span class="dv">48</span>, <span class="dv">53</span>, <span class="dv">56</span>]</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>labels <span class="op">=</span> [<span class="st">'13-18'</span>, <span class="st">'18-23'</span>, <span class="st">'23-28'</span>, <span class="st">'28-33'</span>, <span class="st">'33-38'</span>, <span class="st">'38-43'</span>, <span class="st">'43-48'</span>, <span class="st">'48-53'</span>, <span class="st">'Plus de 53'</span>]</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajouter une nouvelle colonne pour la tranche d'âge, en utilisant pd.cut()</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>data_pd[<span class="st">'tranche_age_engagement'</span>] <span class="op">=</span> pd.cut(data_pd[<span class="st">'age_engagement'</span>], bins<span class="op">=</span>bins, labels<span class="op">=</span>labels, right<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data_pd[[<span class="st">'age_engagement'</span>, <span class="st">'tranche_age_engagement'</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      age_engagement tranche_age_engagement
0                 18                  18-23
1                 26                  23-28
2                 27                  23-28
3                 24                  23-28
4                 24                  23-28
...              ...                    ...
5739              33                  33-38
5740              23                  23-28
5741              26                  23-28
5742              35                  33-38
5743              32                  28-33

[5744 rows x 2 columns]</code></pre>
</div>
</div>
<div id="cell-18" class="cell" data-execution_count="121">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Conversion de Pandas en Polars</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>data_pl_new <span class="op">=</span> pl.DataFrame(data_pd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-19" class="cell" data-execution_count="122">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data_pl_new)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (5_744, 21)
┌───────────┬───────┬─────────────┬─────────────┬───┬───────────┬────────┬────────────┬────────────┐
│ CATEGORIE ┆ GRADE ┆ DERNIER     ┆ SALAIRE     ┆ … ┆ IDP       ┆ IPM    ┆ age_engage ┆ tranche_ag │
│ ---       ┆ ---   ┆ AVACEMENT   ┆ PERS        ┆   ┆ ---       ┆ ---    ┆ ment       ┆ e_engageme │
│ str       ┆ str   ┆ EN GRADE    ┆ ---         ┆   ┆ f64       ┆ i64    ┆ ---        ┆ nt         │
│           ┆       ┆ ---         ┆ f64         ┆   ┆           ┆        ┆ i32        ┆ ---        │
│           ┆       ┆ datetime[ms ┆             ┆   ┆           ┆        ┆            ┆ cat        │
│           ┆       ┆ ]           ┆             ┆   ┆           ┆        ┆            ┆            │
╞═══════════╪═══════╪═════════════╪═════════════╪═══╪═══════════╪════════╪════════════╪════════════╡
│ M&amp;C       ┆ 11    ┆ 1998-07-01  ┆ 47865.44225 ┆ … ┆ 126115.18 ┆ 348500 ┆ 18         ┆ 18-23      │
│           ┆       ┆ 00:00:00    ┆             ┆   ┆           ┆        ┆            ┆            │
│ M&amp;C       ┆ 11    ┆ 1998-09-01  ┆ 47652.18334 ┆ … ┆ 126115.18 ┆ 348500 ┆ 26         ┆ 23-28      │
│           ┆       ┆ 00:00:00    ┆             ┆   ┆           ┆        ┆            ┆            │
│ M&amp;C       ┆ 11    ┆ 2000-08-01  ┆ 47348.71096 ┆ … ┆ 126115.18 ┆ 348500 ┆ 27         ┆ 23-28      │
│           ┆       ┆ 00:00:00    ┆             ┆   ┆           ┆        ┆            ┆            │
│ M&amp;C       ┆ 11    ┆ 2000-10-01  ┆ 47115.68266 ┆ … ┆ 126115.18 ┆ 348500 ┆ 24         ┆ 23-28      │
│           ┆       ┆ 00:00:00    ┆             ┆   ┆           ┆        ┆            ┆            │
│ M&amp;C       ┆ 11    ┆ 2000-12-01  ┆ 47344.56758 ┆ … ┆ 126115.18 ┆ 348500 ┆ 24         ┆ 23-28      │
│           ┆       ┆ 00:00:00    ┆             ┆   ┆           ┆        ┆            ┆            │
│ …         ┆ …     ┆ …           ┆ …           ┆ … ┆ …         ┆ …      ┆ …          ┆ …          │
│ EXE       ┆ 71    ┆ 2023-11-01  ┆ 4920.44077  ┆ … ┆ 46635.93  ┆ 342500 ┆ 33         ┆ 33-38      │
│           ┆       ┆ 00:00:00    ┆             ┆   ┆           ┆        ┆            ┆            │
│ EXE       ┆ 71    ┆ 2023-11-01  ┆ 4920.44077  ┆ … ┆ 46635.93  ┆ 342500 ┆ 23         ┆ 23-28      │
│           ┆       ┆ 00:00:00    ┆             ┆   ┆           ┆        ┆            ┆            │
│ EXE       ┆ 71    ┆ 2023-11-01  ┆ 4920.44077  ┆ … ┆ 46635.93  ┆ 342500 ┆ 26         ┆ 23-28      │
│           ┆       ┆ 00:00:00    ┆             ┆   ┆           ┆        ┆            ┆            │
│ EXE       ┆ 61    ┆ 2023-11-01  ┆ 4913.62077  ┆ … ┆ 46413.51  ┆ 342500 ┆ 35         ┆ 33-38      │
│           ┆       ┆ 00:00:00    ┆             ┆   ┆           ┆        ┆            ┆            │
│ EXE       ┆ 61    ┆ 2023-11-01  ┆ 4913.62077  ┆ … ┆ 46413.51  ┆ 342500 ┆ 32         ┆ 28-33      │
│           ┆       ┆ 00:00:00    ┆             ┆   ┆           ┆        ┆            ┆            │
└───────────┴───────┴─────────────┴─────────────┴───┴───────────┴────────┴────────────┴────────────┘</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="analyse-de-données" class="level2">
<h2 class="anchored" data-anchor-id="analyse-de-données">### Analyse de données</h2>
<section id="explication-des-variables" class="level4">
<h4 class="anchored" data-anchor-id="explication-des-variables">Explication des variables</h4>
<ul>
<li><strong>CATEGORIE</strong> : Code ou description de la catégorie professionnelle du personnel</li>
<li><strong>GRADE</strong> : Niveau de grade de l’employé au sein de la catégorie</li>
<li><strong>DERNIER AVACEMENT EN GRADE</strong> : Date du dernier avancement en grade de l’employé.</li>
<li><strong>SALAIRE PERS</strong> : Salaire personnel ou de base de l’employé,</li>
<li><strong>CITE</strong> : Code de la cité ou de la localité où réside l’employé</li>
<li><strong>SEXE</strong> : Sexe de l’employé</li>
<li><strong>ETATCIVIL</strong> : Code de l’état civil de l’employé.</li>
<li><strong>INDEPOUSE</strong> : Indicateur pour savoir si l’employé a un conjoint à charge. Par exemple, “1” pour oui et “0” pour non.</li>
<li><strong>ENFANT</strong> : Nombre d’enfants à charge de l’employé</li>
<li><strong>COTATION</strong> : Code de cotation ou score lié au poste ou à la performance de l’employé.</li>
<li><strong>DATENAISSA</strong> : Date de naissance de l’employé.</li>
<li><strong>DATEENGAGE</strong> : Date d’engagement de l’employé dans l’entreprise (date d’embauche).</li>
<li><strong>TRP</strong> : Indemnité de transport, ou allocation liée aux frais de déplacement.</li>
<li><strong>LGT</strong> : Allocation logement de l’employé.</li>
<li><strong>SSANTE</strong> : Cotisation ou indemnité pour la sécurité sociale ou assurance santé.</li>
<li><strong>ENERGIE</strong> : Allocation ou indemnité énergétique, qui pourrait couvrir des frais d’électricité, de chauffage, etc.</li>
<li><strong>IFT</strong> : Allocation ou indemnité pour frais de téléphone.</li>
<li><strong>IDP</strong> : Indemnité pour dépendants, ou allocation pour les personnes à charge.</li>
<li><strong>IPM</strong> : Indemnité pour prestations médicales, couvrant potentiellement les frais de santé ou d’hospitalisation.</li>
</ul>
</section>
<section id="analyse-univariée" class="level3">
<h3 class="anchored" data-anchor-id="analyse-univariée">Analyse univariée</h3>
<div id="cell-23" class="cell" data-execution_count="123">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>tranche_counts <span class="op">=</span> data_pd[<span class="st">'tranche_age_engagement'</span>].value_counts().sort_index()</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tranche_counts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tranche_age_engagement
13-18           88
18-23         1927
23-28         1998
28-33         1025
33-38          438
38-43          194
43-48           56
48-53           15
Plus de 53       3
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="cell-24" class="cell" data-execution_count="124">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>tranche_counts_pl <span class="op">=</span> pl.DataFrame(tranche_counts.reset_index())</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>tranche_counts_pl.columns <span class="op">=</span> [<span class="st">"tranche_age_engagement"</span>, <span class="st">"effectif"</span>]</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(tranche_counts_pl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (9, 2)
┌────────────────────────┬──────────┐
│ tranche_age_engagement ┆ effectif │
│ ---                    ┆ ---      │
│ cat                    ┆ i64      │
╞════════════════════════╪══════════╡
│ 13-18                  ┆ 88       │
│ 18-23                  ┆ 1927     │
│ 23-28                  ┆ 1998     │
│ 28-33                  ┆ 1025     │
│ 33-38                  ┆ 438      │
│ 38-43                  ┆ 194      │
│ 43-48                  ┆ 56       │
│ 48-53                  ┆ 15       │
│ Plus de 53             ┆ 3        │
└────────────────────────┴──────────┘</code></pre>
</div>
</div>
<div id="cell-25" class="cell" data-execution_count="125">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>tranche_counts_pd <span class="op">=</span> tranche_counts_pl.to_pandas()</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>plt.bar(tranche_counts_pd[<span class="st">'tranche_age_engagement'</span>], tranche_counts_pd[<span class="st">'effectif'</span>], color<span class="op">=</span><span class="st">'skyblue'</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Tranche d</span><span class="ch">\'</span><span class="st">âge'</span>)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Nombre de personnes'</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Distribution des employés par tranche d</span><span class="ch">\'</span><span class="st">âge'</span>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)  <span class="co"># Incliner les étiquettes de l'axe des x pour une meilleure lisibilité</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analyse_files/figure-html/cell-16-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-26" class="cell" data-execution_count="126">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data_pl_new.select(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">'age_engagement'</span>),</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">'SALAIRE PERS'</span>),</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    pl.col(<span class="st">'ENFANT'</span>)</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>).describe())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (9, 4)
┌────────────┬────────────────┬──────────────┬──────────┐
│ statistic  ┆ age_engagement ┆ SALAIRE PERS ┆ ENFANT   │
│ ---        ┆ ---            ┆ ---          ┆ ---      │
│ str        ┆ f64            ┆ f64          ┆ f64      │
╞════════════╪════════════════╪══════════════╪══════════╡
│ count      ┆ 5744.0         ┆ 5744.0       ┆ 5744.0   │
│ null_count ┆ 0.0            ┆ 0.0          ┆ 0.0      │
│ mean       ┆ 25.584436      ┆ 25926.253361 ┆ 2.184018 │
│ std        ┆ 5.77386        ┆ 23616.887196 ┆ 2.524423 │
│ min        ┆ 13.0           ┆ 4705.46265   ┆ 0.0      │
│ 25%        ┆ 21.0           ┆ 5180.02077   ┆ 0.0      │
│ 50%        ┆ 24.0           ┆ 5352.96077   ┆ 1.0      │
│ 75%        ┆ 29.0           ┆ 49967.96363  ┆ 4.0      │
│ max        ┆ 55.0           ┆ 74226.169    ┆ 16.0     │
└────────────┴────────────────┴──────────────┴──────────┘</code></pre>
</div>
</div>
<div id="cell-27" class="cell" data-execution_count="127">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>data_pl_new.<span class="bu">filter</span>(pl.col(<span class="st">'age_engagement'</span>) <span class="op">&lt;</span> <span class="dv">18</span>).height</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="127">
<pre><code>88</code></pre>
</div>
</div>
<div id="cell-28" class="cell" data-execution_count="128">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrer les données où age_engagement est entre 13 et 18</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>filtered_data <span class="op">=</span> data_pl_new.<span class="bu">filter</span>((pl.col(<span class="st">'age_engagement'</span>) <span class="op">&gt;=</span> <span class="dv">13</span>) <span class="op">&amp;</span> (pl.col(<span class="st">'age_engagement'</span>) <span class="op">&lt;</span> <span class="dv">18</span>))</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenir la hauteur (nombre de lignes) du DataFrame filtré</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>filtered_height <span class="op">=</span> filtered_data.height</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(filtered_height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>88</code></pre>
</div>
</div>
<div id="cell-29" class="cell" data-execution_count="129">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compter le nombre de personnes dont l'âge est supérieur à 29</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>data_pl_new.<span class="bu">filter</span>(pl.col(<span class="st">'age_engagement'</span>) <span class="op">&gt;</span> <span class="dv">50</span>).height</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="129">
<pre><code>4</code></pre>
</div>
</div>
<div id="cell-30" class="cell" data-execution_count="130">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>data_pd[[<span class="st">'CATEGORIE'</span>]].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="130">
<pre><code>CATEGORIE
EXE          3203
M&amp;C          2541
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="cell-31" class="cell" data-execution_count="131">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>data_pd[[<span class="st">'INDEPOUSE'</span>]].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="131">
<pre><code>INDEPOUSE
1            4594
0             940
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="cell-32" class="cell" data-execution_count="132">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>data_pd[<span class="st">'ETATCIVIL'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="132">
<pre><code>ETATCIVIL
4    4547
0     908
A      87
E      66
B      32
1      21
D      10
2       3
3       2
C       2
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="cell-33" class="cell" data-execution_count="133">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>data_pd[<span class="st">'SEXE'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="133">
<pre><code>SEXE
M    5090
F     654
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="cell-34" class="cell" data-execution_count="134">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data_pd[<span class="st">'CITE'</span>].unique())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['06' '05' '01' '02' '08' '07' '12' '04' '03' '09' '10' '14' '15' '13'
 '16' '11' 'AA']</code></pre>
</div>
</div>
<div id="cell-35" class="cell" data-execution_count="135">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>data_pd[<span class="st">'CITE'</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="135">
<pre><code>CITE
01    2338
02     608
12     380
07     375
06     336
10     319
14     245
09     212
03     184
05     171
16     151
13     103
08     103
04      90
15      87
11      41
AA       1
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="cell-36" class="cell" data-execution_count="136">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>data_pd[[<span class="st">'GRADE'</span>]].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="136">
<pre><code>GRADE
69       566
49       565
13       544
89       486
14       419
        ... 
64         1
73         1
95         1
91         1
94         1
Name: count, Length: 71, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="analyse-bivariée" class="level3">
<h3 class="anchored" data-anchor-id="analyse-bivariée">Analyse bivariée</h3>
<section id="categorie-vs-sexe" class="level4">
<h4 class="anchored" data-anchor-id="categorie-vs-sexe">Categorie vs Sexe</h4>
<div id="cell-39" class="cell" data-execution_count="137">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>data_pd <span class="op">=</span> data_pl_new.to_pandas()</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Créer un tableau de contingence avec Pandas</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>contingency_table <span class="op">=</span> pd.crosstab(data_pd[<span class="st">'CATEGORIE'</span>], data_pd[<span class="st">'SEXE'</span>])</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher le tableau de contingence</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(contingency_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>SEXE         F     M
CATEGORIE           
EXE        207  2996
M&amp;C        447  2094</code></pre>
</div>
</div>
<div id="cell-40" class="cell" data-execution_count="138">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>contingency_table.plot(kind<span class="op">=</span><span class="st">'bar'</span>, stacked<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span>[<span class="st">'skyblue'</span>, <span class="st">'salmon'</span>], figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Catégorie'</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Effectif'</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Répartition des sexes par catégorie'</span>)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">'Sexe'</span>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analyse_files/figure-html/cell-29-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-41" class="cell" data-execution_count="139">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tableau de contingence entre CATEGORIE et SEXE</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>contingency_table <span class="op">=</span> pd.crosstab(data_pd[<span class="st">'CATEGORIE'</span>], data_pd[<span class="st">'SEXE'</span>])</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Tableau de contingence :</span><span class="ch">\n</span><span class="st">"</span>, contingency_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Tableau de contingence :
 SEXE         F     M
CATEGORIE           
EXE        207  2996
M&amp;C        447  2094</code></pre>
</div>
</div>
<div id="cell-42" class="cell" data-execution_count="140">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcul des proportions par catégorie (en normalisant par ligne)</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>contingency_table_proportions <span class="op">=</span> contingency_table.div(contingency_table.<span class="bu">sum</span>(axis<span class="op">=</span><span class="dv">1</span>), axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Proportions par catégorie :</span><span class="ch">\n</span><span class="st">"</span>, contingency_table_proportions.<span class="bu">round</span>(<span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Proportions par catégorie :
 SEXE          F     M
CATEGORIE            
EXE        0.06  0.94
M&amp;C        0.18  0.82</code></pre>
</div>
</div>
<div id="cell-43" class="cell" data-execution_count="141">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>contingency_table_proportions.plot(kind<span class="op">=</span><span class="st">"bar"</span>, stacked<span class="op">=</span><span class="va">True</span>, color<span class="op">=</span>[<span class="st">"skyblue"</span>, <span class="st">"salmon"</span>], figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Catégorie"</span>)</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Proportion"</span>)</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Répartition des sexes au sein de chaque catégorie"</span>)</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>plt.legend(title<span class="op">=</span><span class="st">"Sexe"</span>, loc<span class="op">=</span><span class="st">"upper right"</span>)</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analyse_files/figure-html/cell-32-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="categorie-vs-salaire" class="level4">
<h4 class="anchored" data-anchor-id="categorie-vs-salaire">Categorie vs salaire</h4>
<div id="cell-45" class="cell" data-execution_count="142">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">#statistiques descriptives des salaires pour chaque catégorie</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>statistiques_salaire <span class="op">=</span> data_pd.groupby(<span class="st">"CATEGORIE"</span>)[<span class="st">"SALAIRE PERS"</span>].describe()</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(statistiques_salaire)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            count          mean          std          min          25%  \
CATEGORIE                                                                
EXE        3203.0   5187.316031   130.651722   4705.46265   5117.14077   
M&amp;C        2541.0  52068.251106  5919.226805  42198.99565  46799.62942   

                   50%          75%          max  
CATEGORIE                                         
EXE         5197.52077   5278.67077   5522.96077  
M&amp;C        50670.68815  54851.62861  74226.16900  </code></pre>
</div>
</div>
<div id="cell-46" class="cell" data-execution_count="143">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualisation avec un boxplot</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data<span class="op">=</span>data_pd, x<span class="op">=</span><span class="st">"CATEGORIE"</span>, y<span class="op">=</span><span class="st">"SALAIRE PERS"</span>, palette<span class="op">=</span><span class="st">"Set2"</span>)</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajout des labels et un titre</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Distribution des Salaires par Catégorie"</span>)</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Catégorie"</span>)</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Salaire (SALAIRE PERS)"</span>)</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Pinto Katende\AppData\Local\Temp\ipykernel_13552\408106011.py:3: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.boxplot(data=data_pd, x="CATEGORIE", y="SALAIRE PERS", palette="Set2")</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analyse_files/figure-html/cell-34-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-47" class="cell" data-execution_count="144">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>categories <span class="op">=</span> data_pd[<span class="st">"CATEGORIE"</span>].unique()</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="co"># sous-graphiques (un pour chaque catégorie)</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>fig, axes <span class="op">=</span> plt.subplots(<span class="bu">len</span>(categories), <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="bu">len</span>(categories) <span class="op">*</span> <span class="dv">4</span>), sharex<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co"># boxplot pour chaque sous-graphe</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, categorie <span class="kw">in</span> <span class="bu">enumerate</span>(categories):</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    sns.boxplot(</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>        data<span class="op">=</span>data_pd[data_pd[<span class="st">"CATEGORIE"</span>] <span class="op">==</span> categorie], </span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="st">"CATEGORIE"</span>, </span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="st">"SALAIRE PERS"</span>, </span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>        ax<span class="op">=</span>axes[i], </span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>        palette<span class="op">=</span><span class="st">"Set2"</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Titre pour chaque sous-graphique</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>    axes[i].set_title(<span class="ss">f"Distribution des Salaires pour la Catégorie </span><span class="sc">{</span>categorie<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>    axes[i].set_xlabel(<span class="st">"Catégorie"</span>)</span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>    axes[i].set_ylabel(<span class="st">"Salaire (SALAIRE PERS)"</span>)</span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajuster l'espacement entre les sous-graphiques</span></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Pinto Katende\AppData\Local\Temp\ipykernel_13552\431817117.py:8: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.boxplot(
C:\Users\Pinto Katende\AppData\Local\Temp\ipykernel_13552\431817117.py:8: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  sns.boxplot(</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="analyse_files/figure-html/cell-35-output-2.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="categorie-vs-nombre-denfant" class="level4">
<h4 class="anchored" data-anchor-id="categorie-vs-nombre-denfant">Categorie vs Nombre d’enfant</h4>
<div id="cell-49" class="cell" data-execution_count="145">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">#statistiques descriptives des salaires pour chaque catégorie</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>statistiques_salaire <span class="op">=</span> data_pd.groupby(<span class="st">"CATEGORIE"</span>)[<span class="st">"ENFANT"</span>].describe()</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(statistiques_salaire)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>            count      mean       std  min  25%  50%  75%   max
CATEGORIE                                                      
EXE        3203.0  2.451452  2.665344  0.0  0.0  2.0  4.0  16.0
M&amp;C        2541.0  1.846911  2.291155  0.0  0.0  1.0  3.0  14.0</code></pre>
</div>
</div>
<div id="cell-50" class="cell" data-execution_count="146">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> (</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>    data_pl_new.group_by(<span class="st">'CATEGORIE'</span>)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    .agg([</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'ENFANT'</span>).mean().alias(<span class="st">'mean'</span>),</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'ENFANT'</span>).std().alias(<span class="st">'std'</span>),</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'ENFANT'</span>).<span class="bu">min</span>().alias(<span class="st">'min'</span>),</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'ENFANT'</span>).quantile(<span class="fl">0.25</span>).alias(<span class="st">'25%'</span>),</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'ENFANT'</span>).median().alias(<span class="st">'50%'</span>),  <span class="co"># Médiane</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'ENFANT'</span>).quantile(<span class="fl">0.75</span>).alias(<span class="st">'75%'</span>),</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'ENFANT'</span>).<span class="bu">max</span>().alias(<span class="st">'max'</span>),</span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'ENFANT'</span>).<span class="bu">sum</span>().alias(<span class="st">'sum'</span>),</span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a>        pl.col(<span class="st">'ENFANT'</span>).count().alias(<span class="st">'n'</span>)</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (2, 10)
┌───────────┬──────────┬──────────┬─────┬───┬─────┬─────┬──────┬──────┐
│ CATEGORIE ┆ mean     ┆ std      ┆ min ┆ … ┆ 75% ┆ max ┆ sum  ┆ n    │
│ ---       ┆ ---      ┆ ---      ┆ --- ┆   ┆ --- ┆ --- ┆ ---  ┆ ---  │
│ str       ┆ f64      ┆ f64      ┆ i64 ┆   ┆ f64 ┆ i64 ┆ i64  ┆ u32  │
╞═══════════╪══════════╪══════════╪═════╪═══╪═════╪═════╪══════╪══════╡
│ EXE       ┆ 2.451452 ┆ 2.665344 ┆ 0   ┆ … ┆ 4.0 ┆ 16  ┆ 7852 ┆ 3203 │
│ M&amp;C       ┆ 1.846911 ┆ 2.291155 ┆ 0   ┆ … ┆ 3.0 ┆ 14  ┆ 4693 ┆ 2541 │
└───────────┴──────────┴──────────┴─────┴───┴─────┴─────┴──────┴──────┘</code></pre>
</div>
</div>
<div id="cell-51" class="cell" data-execution_count="147">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>contingency_table <span class="op">=</span> (</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>    data_pl_new.group_by([<span class="st">'CATEGORIE'</span>, <span class="st">'INDEPOUSE'</span>])</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    .count()</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    .pivot(</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>        values<span class="op">=</span><span class="st">'count'</span>, </span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>        index<span class="op">=</span><span class="st">'CATEGORIE'</span>, </span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>        columns<span class="op">=</span><span class="st">'INDEPOUSE'</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>    .fill_null(<span class="dv">0</span>)  <span class="co"># Remplir les valeurs nulles avec 0</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(contingency_table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (2, 4)
┌───────────┬──────┬──────┬─────┐
│ CATEGORIE ┆ 1    ┆ null ┆ 0   │
│ ---       ┆ ---  ┆ ---  ┆ --- │
│ str       ┆ u32  ┆ u32  ┆ u32 │
╞═══════════╪══════╪══════╪═════╡
│ M&amp;C       ┆ 1956 ┆ 22   ┆ 563 │
│ EXE       ┆ 2638 ┆ 188  ┆ 377 │
└───────────┴──────┴──────┴─────┘</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\Pinto Katende\AppData\Local\Temp\ipykernel_13552\637639986.py:3: DeprecationWarning: `GroupBy.count` is deprecated. It has been renamed to `len`.
  .count()
C:\Users\Pinto Katende\AppData\Local\Temp\ipykernel_13552\637639986.py:4: DeprecationWarning: The argument `columns` for `DataFrame.pivot` is deprecated. It has been renamed to `on`.
  .pivot(</code></pre>
</div>
</div>
<div id="cell-52" class="cell" data-execution_count="148">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>pd.crosstab(data_pd[<span class="st">'CATEGORIE'</span>], data_pd[<span class="st">'INDEPOUSE'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="148">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">INDEPOUSE</th>
<th data-quarto-table-cell-role="th">0</th>
<th data-quarto-table-cell-role="th">1</th>
</tr>
<tr class="odd">
<th data-quarto-table-cell-role="th">CATEGORIE</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">EXE</td>
<td>377</td>
<td>2638</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">M&amp;C</td>
<td>563</td>
<td>1956</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>On sait voir ici que la cotation est reservée uniquement aux employés qui trouvent dans la catégorie <strong>M&amp;C</strong>, et non dans <strong>EXE</strong></p>
</section>
</section>
<section id="elaboration-du-modèle-pour-la-prédiction-des-catégories" class="level3">
<h3 class="anchored" data-anchor-id="elaboration-du-modèle-pour-la-prédiction-des-catégories">Elaboration du modèle pour la prédiction des catégories</h3>
<div id="cell-55" class="cell" data-execution_count="149">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data_pl_new.columns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['CATEGORIE', 'GRADE', 'DERNIER AVACEMENT EN GRADE', 'SALAIRE PERS', 'CITE', 'SEXE', 'ETATCIVIL', 'INDEPOUSE', 'ENFANT', 'COTATION', 'DATENAISSA', 'DATEENGAGE', 'TRP', 'LGT', 'SSANTE', 'ENERGIE', 'IFT', 'IDP', 'IPM', 'age_engagement', 'tranche_age_engagement']</code></pre>
</div>
</div>
<div id="cell-56" class="cell" data-execution_count="150">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">#### Sélection des variables pour le modèle</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>data_model <span class="op">=</span> data_pl_new.select(</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>    pl.<span class="bu">all</span>().exclude([<span class="st">'DERNIER AVACEMENT EN GRADE'</span>, <span class="st">'COTATION'</span>, <span class="st">'DATENAISSA'</span>, <span class="st">'DATEENGAGE'</span>, <span class="st">'tranche_age_engagement'</span>, <span class="st">'GRADE'</span>,<span class="st">'ETATCIVIL'</span> ])</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (5_744, 14)
┌───────────┬──────────────┬──────┬──────┬───┬──────────┬───────────┬────────┬────────────────┐
│ CATEGORIE ┆ SALAIRE PERS ┆ CITE ┆ SEXE ┆ … ┆ IFT      ┆ IDP       ┆ IPM    ┆ age_engagement │
│ ---       ┆ ---          ┆ ---  ┆ ---  ┆   ┆ ---      ┆ ---       ┆ ---    ┆ ---            │
│ str       ┆ f64          ┆ str  ┆ str  ┆   ┆ f64      ┆ f64       ┆ i64    ┆ i32            │
╞═══════════╪══════════════╪══════╪══════╪═══╪══════════╪═══════════╪════════╪════════════════╡
│ M&amp;C       ┆ 47865.44225  ┆ 06   ┆ M    ┆ … ┆ 97837.51 ┆ 126115.18 ┆ 348500 ┆ 18             │
│ M&amp;C       ┆ 47652.18334  ┆ 05   ┆ M    ┆ … ┆ 97837.51 ┆ 126115.18 ┆ 348500 ┆ 26             │
│ M&amp;C       ┆ 47348.71096  ┆ 06   ┆ M    ┆ … ┆ 97837.51 ┆ 126115.18 ┆ 348500 ┆ 27             │
│ M&amp;C       ┆ 47115.68266  ┆ 01   ┆ M    ┆ … ┆ 97837.51 ┆ 126115.18 ┆ 348500 ┆ 24             │
│ M&amp;C       ┆ 47344.56758  ┆ 02   ┆ M    ┆ … ┆ 97837.51 ┆ 126115.18 ┆ 348500 ┆ 24             │
│ …         ┆ …            ┆ …    ┆ …    ┆ … ┆ …        ┆ …         ┆ …      ┆ …              │
│ EXE       ┆ 4920.44077   ┆ 10   ┆ M    ┆ … ┆ 67568.84 ┆ 46635.93  ┆ 342500 ┆ 33             │
│ EXE       ┆ 4920.44077   ┆ 10   ┆ M    ┆ … ┆ 67568.84 ┆ 46635.93  ┆ 342500 ┆ 23             │
│ EXE       ┆ 4920.44077   ┆ 10   ┆ M    ┆ … ┆ 67568.84 ┆ 46635.93  ┆ 342500 ┆ 26             │
│ EXE       ┆ 4913.62077   ┆ 10   ┆ M    ┆ … ┆ 67278.84 ┆ 46413.51  ┆ 342500 ┆ 35             │
│ EXE       ┆ 4913.62077   ┆ 10   ┆ M    ┆ … ┆ 67278.84 ┆ 46413.51  ┆ 342500 ┆ 32             │
└───────────┴──────────────┴──────┴──────┴───┴──────────┴───────────┴────────┴────────────────┘</code></pre>
</div>
</div>
<div id="cell-57" class="cell" data-execution_count="151">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>data_model.to_pandas().info()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 5744 entries, 0 to 5743
Data columns (total 14 columns):
 #   Column          Non-Null Count  Dtype  
---  ------          --------------  -----  
 0   CATEGORIE       5744 non-null   object 
 1   SALAIRE PERS    5744 non-null   float64
 2   CITE            5744 non-null   object 
 3   SEXE            5744 non-null   object 
 4   INDEPOUSE       5534 non-null   object 
 5   ENFANT          5744 non-null   int64  
 6   TRP             5744 non-null   float64
 7   LGT             5744 non-null   float64
 8   SSANTE          5744 non-null   float64
 9   ENERGIE         5744 non-null   int64  
 10  IFT             5744 non-null   float64
 11  IDP             5744 non-null   float64
 12  IPM             5744 non-null   int64  
 13  age_engagement  5744 non-null   int32  
dtypes: float64(6), int32(1), int64(3), object(4)
memory usage: 605.9+ KB</code></pre>
</div>
</div>
<div id="cell-58" class="cell" data-execution_count="152">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir les données Polars en DataFrame Pandas pour la manipulation</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> data_model.to_pandas()</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Identifier les colonnes catégorielles</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>colonnes_categoricielles <span class="op">=</span> [<span class="st">"CITE"</span>, <span class="st">"SEXE"</span>, <span class="st">"INDEPOUSE"</span>]</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Appliquer un encodage LabelEncoder sur ces colonnes</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>label_encoders <span class="op">=</span> {}</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> colonnes_categoricielles:</span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>    le <span class="op">=</span> LabelEncoder()</span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>    df[col] <span class="op">=</span> le.fit_transform(df[col])</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>    label_encoders[col] <span class="op">=</span> le</span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Encodage de la variable cible</span></span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"CATEGORIE"</span>] <span class="op">=</span> LabelEncoder().fit_transform(df[<span class="st">"CATEGORIE"</span>])</span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Séparer les données en X et y</span></span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> df.drop(columns<span class="op">=</span>[<span class="st">"CATEGORIE"</span>])</span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">"CATEGORIE"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-59" class="cell" data-execution_count="153">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-60" class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialiser et entraîner le modèle de régression logistique</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LogisticRegression(max_iter<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>model.fit(X_train, y_train)</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prédictions et évaluation</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test)</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>accuracy <span class="op">=</span> accuracy_score(y_test, y_pred)</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>report <span class="op">=</span> classification_report(y_test, y_pred)</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Accuracy: </span><span class="sc">{</span>accuracy<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Classification Report:"</span>)</span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(report)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Accuracy: 1.0
Classification Report:
              precision    recall  f1-score   support

           0       1.00      1.00      1.00       632
           1       1.00      1.00      1.00       517

    accuracy                           1.00      1149
   macro avg       1.00      1.00      1.00      1149
weighted avg       1.00      1.00      1.00      1149
</code></pre>
</div>
</div>
<section id="etudes-des-variables-du-modèle-avec-statsmodels" class="level4">
<h4 class="anchored" data-anchor-id="etudes-des-variables-du-modèle-avec-statsmodels">Etudes des variables du modèle avec statsmodels</h4>
<div id="cell-62" class="cell" data-execution_count="156">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.Logit(y_train, X_train)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> model.fit()</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher le résumé du modèle</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Warning: Maximum number of iterations has been exceeded.
         Current function value: 0.000000
         Iterations: 35
                           Logit Regression Results                           
==============================================================================
Dep. Variable:              CATEGORIE   No. Observations:                 4595
Model:                          Logit   Df Residuals:                     4582
Method:                           MLE   Df Model:                           12
Date:                Sat, 02 Nov 2024   Pseudo R-squ.:                   1.000
Time:                        13:40:12   Log-Likelihood:            -1.0203e-12
converged:                      False   LL-Null:                       -3152.4
Covariance Type:            nonrobust   LLR p-value:                     0.000
==================================================================================
                     coef    std err          z      P&gt;|z|      [0.025      0.975]
----------------------------------------------------------------------------------
SALAIRE PERS    1.884e-06    621.986   3.03e-09      1.000   -1219.070    1219.070
CITE            6.417e-05   2.24e+05   2.86e-10      1.000    -4.4e+05     4.4e+05
SEXE            3.088e-07   4.18e+06   7.39e-14      1.000   -8.19e+06    8.19e+06
INDEPOUSE      -6.063e-07    3.1e+06  -1.95e-13      1.000   -6.08e+06    6.08e+06
ENFANT         -1.028e-05   4.34e+05  -2.37e-11      1.000   -8.51e+05    8.51e+05
TRP             8.947e-06   1577.439   5.67e-09      1.000   -3091.723    3091.723
LGT            -1.299e-06    136.398  -9.52e-09      1.000    -267.336     267.336
SSANTE         -4.101e-06    232.712  -1.76e-08      1.000    -456.108     456.108
ENERGIE            0.0101   6.05e+04   1.67e-07      1.000   -1.19e+05    1.19e+05
IFT            -3.695e-05   2372.571  -1.56e-08      1.000   -4650.154    4650.154
IDP                0.0002   4926.869   3.51e-08      1.000   -9656.485    9656.486
IPM               -0.0003    625.861  -4.74e-07      1.000   -1226.666    1226.665
age_engagement -1.041e-05   1.87e+05  -5.55e-11      1.000   -3.67e+05    3.67e+05
==================================================================================

Complete Separation: The results show that there iscomplete separation or perfect prediction.
In this case the Maximum Likelihood Estimator does not exist and the parameters
are not identified.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\base\model.py:607: ConvergenceWarning: Maximum Likelihood optimization failed to converge. Check mle_retvals
  warnings.warn("Maximum Likelihood optimization failed to "</code></pre>
</div>
</div>
<p>Il y a un problème avec le modèèle, car il parvient à prédire complètement les données, ce qui peut être un signe d’une très forte multi-colinéarité entre les variables.</p>
<section id="etude-de-la-multiccolinéarité" class="level5">
<h5 class="anchored" data-anchor-id="etude-de-la-multiccolinéarité">Etude de la multiccolinéarité</h5>
<div id="cell-65" class="cell" data-execution_count="158">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># VIF pour chaque variable</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>vif_data <span class="op">=</span> pd.DataFrame()</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>vif_data[<span class="st">"feature"</span>] <span class="op">=</span> X.columns</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>vif_data[<span class="st">"VIF"</span>] <span class="op">=</span> [variance_inflation_factor(X.values, i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(X.shape[<span class="dv">1</span>])]</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(vif_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           feature            VIF
0     SALAIRE PERS     221.698094
1             CITE       1.078873
2             SEXE       1.746441
3        INDEPOUSE       1.702281
4           ENFANT       1.060799
5              TRP    2472.915463
6              LGT      20.045121
7           SSANTE     472.829447
8          ENERGIE  313247.777713
9              IFT    1813.738318
10             IDP   39994.592023
11             IPM   47944.429271
12  age_engagement       1.087536</code></pre>
</div>
</div>
<div id="cell-66" class="cell" data-execution_count="162">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>vif <span class="op">=</span> pl.DataFrame({</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'feature'</span>: X.columns,</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VIF'</span>: [variance_inflation_factor(X.values, i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(X.shape[<span class="dv">1</span>])]</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(vif)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (13, 2)
┌────────────────┬───────────────┐
│ feature        ┆ VIF           │
│ ---            ┆ ---           │
│ str            ┆ f64           │
╞════════════════╪═══════════════╡
│ SALAIRE PERS   ┆ 221.698094    │
│ CITE           ┆ 1.078873      │
│ SEXE           ┆ 1.746441      │
│ INDEPOUSE      ┆ 1.702281      │
│ ENFANT         ┆ 1.060799      │
│ …              ┆ …             │
│ ENERGIE        ┆ 313247.777713 │
│ IFT            ┆ 1813.738318   │
│ IDP            ┆ 39994.592023  │
│ IPM            ┆ 47944.429271  │
│ age_engagement ┆ 1.087536      │
└────────────────┴───────────────┘</code></pre>
</div>
</div>
<p>Les résultats du Variance Inflation Factor (VIF) montrent une forte multicolinéarité dans certaines variables, notamment ENERGIE, IDP, IPM, TRP, IFT, et SSANTE. Des VIF élevés (généralement au-dessus de 10) suggèrent que ces variables sont très corrélées avec d’autres, ce qui complique la convergence du modèle.</p>
<p>Pour garder la cohérence du modèle, il y a plusieurs solutions :</p>
<ul>
<li><p><strong>Supprimer les variables avec VIF très élevé</strong> : Commencez par retirer les variables ayant les plus hauts VIF (ENERGIE, IDP, IPM, TRP, IFT, et SSANTE). Cela pourrait réduire la multicolinéarité et améliorer la convergence.</p></li>
<li><p><strong>Tester la Modèle après Chaque Suppression</strong> : Après chaque suppression, recalculer le VIF pour voir si les autres valeurs diminuent également.</p></li>
<li><p><strong>Réexaminer les Variables Retenues</strong> : Une fois les variables fortement colinéaires retirées, réestimer le modèle avec statsmodels</p></li>
</ul>
<div id="cell-68" class="cell" data-execution_count="163">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">##### Nouvelles variables</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>data_model <span class="op">=</span> data_pl_new.select(</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    pl.<span class="bu">all</span>().exclude([<span class="st">'DERNIER AVACEMENT EN GRADE'</span>, <span class="st">'COTATION'</span>, <span class="st">'DATENAISSA'</span>, <span class="st">'DATEENGAGE'</span>, <span class="st">'tranche_age_engagement'</span>, <span class="st">'GRADE'</span>,<span class="st">'ETATCIVIL'</span>, <span class="st">'ENERGIE'</span>, <span class="st">'IDP'</span>, <span class="st">'IPM'</span>, <span class="st">'TRP'</span>, <span class="st">'IFT'</span>, <span class="st">'SSANTE'</span> ])</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (5_744, 8)
┌───────────┬──────────────┬──────┬──────┬───────────┬────────┬──────────┬────────────────┐
│ CATEGORIE ┆ SALAIRE PERS ┆ CITE ┆ SEXE ┆ INDEPOUSE ┆ ENFANT ┆ LGT      ┆ age_engagement │
│ ---       ┆ ---          ┆ ---  ┆ ---  ┆ ---       ┆ ---    ┆ ---      ┆ ---            │
│ str       ┆ f64          ┆ str  ┆ str  ┆ str       ┆ i64    ┆ f64      ┆ i32            │
╞═══════════╪══════════════╪══════╪══════╪═══════════╪════════╪══════════╪════════════════╡
│ M&amp;C       ┆ 47865.44225  ┆ 06   ┆ M    ┆ 1         ┆ 0      ┆ 91627.03 ┆ 18             │
│ M&amp;C       ┆ 47652.18334  ┆ 05   ┆ M    ┆ 0         ┆ 0      ┆ 91627.03 ┆ 26             │
│ M&amp;C       ┆ 47348.71096  ┆ 06   ┆ M    ┆ 1         ┆ 0      ┆ 91627.03 ┆ 27             │
│ M&amp;C       ┆ 47115.68266  ┆ 01   ┆ M    ┆ 1         ┆ 0      ┆ 91627.03 ┆ 24             │
│ M&amp;C       ┆ 47344.56758  ┆ 02   ┆ M    ┆ 1         ┆ 1      ┆ 91627.03 ┆ 24             │
│ …         ┆ …            ┆ …    ┆ …    ┆ …         ┆ …      ┆ …        ┆ …              │
│ EXE       ┆ 4920.44077   ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 73198.2  ┆ 33             │
│ EXE       ┆ 4920.44077   ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 73198.2  ┆ 23             │
│ EXE       ┆ 4920.44077   ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 73198.2  ┆ 26             │
│ EXE       ┆ 4913.62077   ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 45748.88 ┆ 35             │
│ EXE       ┆ 4913.62077   ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 45748.88 ┆ 32             │
└───────────┴──────────────┴──────┴──────┴───────────┴────────┴──────────┴────────────────┘</code></pre>
</div>
</div>
<div id="cell-69" class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir les données Polars en DataFrame Pandas pour la manipulation</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> data_model.to_pandas()</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Identifier les colonnes catégorielles</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>colonnes_categoricielles <span class="op">=</span> [<span class="st">"CITE"</span>, <span class="st">"SEXE"</span>, <span class="st">"INDEPOUSE"</span>]</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Appliquer un encodage LabelEncoder sur ces colonnes</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>label_encoders <span class="op">=</span> {}</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> colonnes_categoricielles:</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>    le <span class="op">=</span> LabelEncoder()</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>    df[col] <span class="op">=</span> le.fit_transform(df[col])</span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>    label_encoders[col] <span class="op">=</span> le</span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Encodage de la variable cible</span></span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"CATEGORIE"</span>] <span class="op">=</span> LabelEncoder().fit_transform(df[<span class="st">"CATEGORIE"</span>])</span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-17"><a href="#cb87-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Séparer les données en X et y</span></span>
<span id="cb87-18"><a href="#cb87-18" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> df.drop(columns<span class="op">=</span>[<span class="st">"CATEGORIE"</span>])</span>
<span id="cb87-19"><a href="#cb87-19" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">"CATEGORIE"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-70" class="cell" data-execution_count="165">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-71" class="cell" data-execution_count="166">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialiser et entraîner le modèle de régression logistique</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LogisticRegression(max_iter<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>model.fit(X_train, y_train)</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prédictions et évaluation</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test)</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>accuracy <span class="op">=</span> accuracy_score(y_test, y_pred)</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>report <span class="op">=</span> classification_report(y_test, y_pred)</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Accuracy: </span><span class="sc">{</span>accuracy<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Classification Report:"</span>)</span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(report)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Accuracy: 1.0
Classification Report:
              precision    recall  f1-score   support

           0       1.00      1.00      1.00       632
           1       1.00      1.00      1.00       517

    accuracy                           1.00      1149
   macro avg       1.00      1.00      1.00      1149
weighted avg       1.00      1.00      1.00      1149
</code></pre>
</div>
</div>
<div id="cell-72" class="cell" data-execution_count="167">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.Logit(y_train, X_train)</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> model.fit()</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher le résumé du modèle</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Warning: Maximum number of iterations has been exceeded.
         Current function value: 0.000000
         Iterations: 35
                           Logit Regression Results                           
==============================================================================
Dep. Variable:              CATEGORIE   No. Observations:                 4595
Model:                          Logit   Df Residuals:                     4588
Method:                           MLE   Df Model:                            6
Date:                Sat, 02 Nov 2024   Pseudo R-squ.:                   1.000
Time:                        14:06:24   Log-Likelihood:            -2.6421e-12
converged:                      False   LL-Null:                       -3152.4
Covariance Type:            nonrobust   LLR p-value:                     0.000
==================================================================================
                     coef    std err          z      P&gt;|z|      [0.025      0.975]
----------------------------------------------------------------------------------
SALAIRE PERS       0.0037    181.851   2.03e-05      1.000    -356.417     356.424
CITE              -0.1549   1.99e+05  -7.78e-07      1.000    -3.9e+05     3.9e+05
SEXE              -4.1551   2.39e+06  -1.74e-06      1.000   -4.68e+06    4.68e+06
INDEPOUSE          0.5807   2.21e+06   2.63e-07      1.000   -4.33e+06    4.33e+06
ENFANT            -0.0626   3.67e+05  -1.71e-07      1.000   -7.19e+05    7.19e+05
LGT               -0.0008    126.436  -6.68e-06      1.000    -247.811     247.809
age_engagement    -0.5150   2.53e+05  -2.04e-06      1.000   -4.95e+05    4.95e+05
==================================================================================

Complete Separation: The results show that there iscomplete separation or perfect prediction.
In this case the Maximum Likelihood Estimator does not exist and the parameters
are not identified.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\discrete\discrete_model.py:227: PerfectSeparationWarning: Perfect separation or prediction detected, parameter may not be identified
  warnings.warn(msg, category=PerfectSeparationWarning)
c:\Users\Pinto Katende\AppData\Local\Programs\Python\Python313\Lib\site-packages\statsmodels\base\model.py:607: ConvergenceWarning: Maximum Likelihood optimization failed to converge. Check mle_retvals
  warnings.warn("Maximum Likelihood optimization failed to "</code></pre>
</div>
</div>
<p>Le meme problème de multicolinéarité persite</p>
<div id="cell-74" class="cell" data-execution_count="168">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>vif <span class="op">=</span> pl.DataFrame({</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'feature'</span>: X.columns,</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VIF'</span>: [variance_inflation_factor(X.values, i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(X.shape[<span class="dv">1</span>])]</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(vif)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (7, 2)
┌────────────────┬───────────┐
│ feature        ┆ VIF       │
│ ---            ┆ ---       │
│ str            ┆ f64       │
╞════════════════╪═══════════╡
│ SALAIRE PERS   ┆ 10.222332 │
│ CITE           ┆ 1.831269  │
│ SEXE           ┆ 13.140461 │
│ INDEPOUSE      ┆ 8.712521  │
│ ENFANT         ┆ 1.818446  │
│ LGT            ┆ 26.521308 │
│ age_engagement ┆ 11.106914 │
└────────────────┴───────────┘</code></pre>
</div>
</div>
<p>On essaye de supprimer une variable après une autre, dont le vif est supérieur à 10, puis on réexamine le modèle.</p>
<p>dans ce cas, on choisi LGT</p>
<div id="cell-76" class="cell" data-execution_count="169">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co">##### Nouvelles variables</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>data_model <span class="op">=</span> data_pl_new.select(</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>    pl.<span class="bu">all</span>().exclude([<span class="st">'DERNIER AVACEMENT EN GRADE'</span>, <span class="st">'COTATION'</span>, <span class="st">'DATENAISSA'</span>, <span class="st">'DATEENGAGE'</span>, <span class="st">'tranche_age_engagement'</span>, <span class="st">'GRADE'</span>,<span class="st">'ETATCIVIL'</span>, <span class="st">'ENERGIE'</span>, <span class="st">'IDP'</span>, <span class="st">'IPM'</span>, <span class="st">'TRP'</span>, <span class="st">'IFT'</span>, <span class="st">'SSANTE'</span>, <span class="st">'LGT'</span>])</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (5_744, 7)
┌───────────┬──────────────┬──────┬──────┬───────────┬────────┬────────────────┐
│ CATEGORIE ┆ SALAIRE PERS ┆ CITE ┆ SEXE ┆ INDEPOUSE ┆ ENFANT ┆ age_engagement │
│ ---       ┆ ---          ┆ ---  ┆ ---  ┆ ---       ┆ ---    ┆ ---            │
│ str       ┆ f64          ┆ str  ┆ str  ┆ str       ┆ i64    ┆ i32            │
╞═══════════╪══════════════╪══════╪══════╪═══════════╪════════╪════════════════╡
│ M&amp;C       ┆ 47865.44225  ┆ 06   ┆ M    ┆ 1         ┆ 0      ┆ 18             │
│ M&amp;C       ┆ 47652.18334  ┆ 05   ┆ M    ┆ 0         ┆ 0      ┆ 26             │
│ M&amp;C       ┆ 47348.71096  ┆ 06   ┆ M    ┆ 1         ┆ 0      ┆ 27             │
│ M&amp;C       ┆ 47115.68266  ┆ 01   ┆ M    ┆ 1         ┆ 0      ┆ 24             │
│ M&amp;C       ┆ 47344.56758  ┆ 02   ┆ M    ┆ 1         ┆ 1      ┆ 24             │
│ …         ┆ …            ┆ …    ┆ …    ┆ …         ┆ …      ┆ …              │
│ EXE       ┆ 4920.44077   ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 33             │
│ EXE       ┆ 4920.44077   ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 23             │
│ EXE       ┆ 4920.44077   ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 26             │
│ EXE       ┆ 4913.62077   ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 35             │
│ EXE       ┆ 4913.62077   ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 32             │
└───────────┴──────────────┴──────┴──────┴───────────┴────────┴────────────────┘</code></pre>
</div>
</div>
<div id="cell-77" class="cell" data-execution_count="170">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir les données Polars en DataFrame Pandas pour la manipulation</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> data_model.to_pandas()</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Identifier les colonnes catégorielles</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>colonnes_categoricielles <span class="op">=</span> [<span class="st">"CITE"</span>, <span class="st">"SEXE"</span>, <span class="st">"INDEPOUSE"</span>]</span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Appliquer un encodage LabelEncoder sur ces colonnes</span></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a>label_encoders <span class="op">=</span> {}</span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> colonnes_categoricielles:</span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a>    le <span class="op">=</span> LabelEncoder()</span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a>    df[col] <span class="op">=</span> le.fit_transform(df[col])</span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a>    label_encoders[col] <span class="op">=</span> le</span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Encodage de la variable cible</span></span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"CATEGORIE"</span>] <span class="op">=</span> LabelEncoder().fit_transform(df[<span class="st">"CATEGORIE"</span>])</span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-17"><a href="#cb98-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Séparer les données en X et y</span></span>
<span id="cb98-18"><a href="#cb98-18" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> df.drop(columns<span class="op">=</span>[<span class="st">"CATEGORIE"</span>])</span>
<span id="cb98-19"><a href="#cb98-19" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">"CATEGORIE"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-78" class="cell" data-execution_count="171">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-79" class="cell" data-execution_count="172">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialiser et entraîner le modèle de régression logistique</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LogisticRegression(max_iter<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>model.fit(X_train, y_train)</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prédictions et évaluation</span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test)</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>accuracy <span class="op">=</span> accuracy_score(y_test, y_pred)</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>report <span class="op">=</span> classification_report(y_test, y_pred)</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Accuracy: </span><span class="sc">{</span>accuracy<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Classification Report:"</span>)</span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(report)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Accuracy: 1.0
Classification Report:
              precision    recall  f1-score   support

           0       1.00      1.00      1.00       632
           1       1.00      1.00      1.00       517

    accuracy                           1.00      1149
   macro avg       1.00      1.00      1.00      1149
weighted avg       1.00      1.00      1.00      1149
</code></pre>
</div>
</div>
<p>Même Problème</p>
<div id="cell-81" class="cell" data-execution_count="173">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>vif <span class="op">=</span> pl.DataFrame({</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'feature'</span>: X.columns,</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'VIF'</span>: [variance_inflation_factor(X.values, i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(X.shape[<span class="dv">1</span>])]</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(vif)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (6, 2)
┌────────────────┬───────────┐
│ feature        ┆ VIF       │
│ ---            ┆ ---       │
│ str            ┆ f64       │
╞════════════════╪═══════════╡
│ SALAIRE PERS   ┆ 2.01234   │
│ CITE           ┆ 1.826764  │
│ SEXE           ┆ 12.691149 │
│ INDEPOUSE      ┆ 8.677319  │
│ ENFANT         ┆ 1.818404  │
│ age_engagement ┆ 7.648621  │
└────────────────┴───────────┘</code></pre>
</div>
</div>
<p>Le problème est résolu en rétirant la variable <strong>SALAIRE PERS</strong>, car le modèle parvenait à prédire correctement la catégorie de l’employé sur base base des seuils de salaire.</p>
<div id="cell-83" class="cell" data-execution_count="192">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co">##### Nouvelles variables</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>data_model <span class="op">=</span> data_pl_new.select(</span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>    pl.<span class="bu">all</span>().exclude([<span class="st">'DERNIER AVACEMENT EN GRADE'</span>, <span class="st">'COTATION'</span>, <span class="st">'DATENAISSA'</span>, <span class="st">'DATEENGAGE'</span>, <span class="st">'tranche_age_engagement'</span>, <span class="st">'GRADE'</span>,<span class="st">'ETATCIVIL'</span>, <span class="st">'ENERGIE'</span>, <span class="st">'IDP'</span>, <span class="st">'IPM'</span>, <span class="st">'TRP'</span>, <span class="st">'IFT'</span>, <span class="st">'SSANTE'</span>, <span class="st">'LGT'</span>, <span class="st">'SALAIRE PERS'</span>])</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(data_model)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>shape: (5_744, 6)
┌───────────┬──────┬──────┬───────────┬────────┬────────────────┐
│ CATEGORIE ┆ CITE ┆ SEXE ┆ INDEPOUSE ┆ ENFANT ┆ age_engagement │
│ ---       ┆ ---  ┆ ---  ┆ ---       ┆ ---    ┆ ---            │
│ str       ┆ str  ┆ str  ┆ str       ┆ i64    ┆ i32            │
╞═══════════╪══════╪══════╪═══════════╪════════╪════════════════╡
│ M&amp;C       ┆ 06   ┆ M    ┆ 1         ┆ 0      ┆ 18             │
│ M&amp;C       ┆ 05   ┆ M    ┆ 0         ┆ 0      ┆ 26             │
│ M&amp;C       ┆ 06   ┆ M    ┆ 1         ┆ 0      ┆ 27             │
│ M&amp;C       ┆ 01   ┆ M    ┆ 1         ┆ 0      ┆ 24             │
│ M&amp;C       ┆ 02   ┆ M    ┆ 1         ┆ 1      ┆ 24             │
│ …         ┆ …    ┆ …    ┆ …         ┆ …      ┆ …              │
│ EXE       ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 33             │
│ EXE       ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 23             │
│ EXE       ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 26             │
│ EXE       ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 35             │
│ EXE       ┆ 10   ┆ M    ┆ null      ┆ 0      ┆ 32             │
└───────────┴──────┴──────┴───────────┴────────┴────────────────┘</code></pre>
</div>
</div>
<div id="cell-84" class="cell" data-execution_count="193">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir les données Polars en DataFrame Pandas pour la manipulation</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> data_model.to_pandas()</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Identifier les colonnes catégorielles</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>colonnes_categoricielles <span class="op">=</span> [<span class="st">"CITE"</span>, <span class="st">"INDEPOUSE"</span>, <span class="st">'SEXE'</span>]</span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Appliquer un encodage LabelEncoder sur ces colonnes</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>label_encoders <span class="op">=</span> {}</span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> col <span class="kw">in</span> colonnes_categoricielles:</span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a>    le <span class="op">=</span> LabelEncoder()</span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a>    df[col] <span class="op">=</span> le.fit_transform(df[col])</span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a>    label_encoders[col] <span class="op">=</span> le</span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Encodage de la variable cible</span></span>
<span id="cb106-15"><a href="#cb106-15" aria-hidden="true" tabindex="-1"></a>df[<span class="st">"CATEGORIE"</span>] <span class="op">=</span> LabelEncoder().fit_transform(df[<span class="st">"CATEGORIE"</span>])</span>
<span id="cb106-16"><a href="#cb106-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-17"><a href="#cb106-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Séparer les données en X et y</span></span>
<span id="cb106-18"><a href="#cb106-18" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> df.drop(columns<span class="op">=</span>[<span class="st">"CATEGORIE"</span>])</span>
<span id="cb106-19"><a href="#cb106-19" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df[<span class="st">"CATEGORIE"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-85" class="cell" data-execution_count="194">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-86" class="cell" data-execution_count="195">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialiser et entraîner le modèle de régression logistique</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> LogisticRegression(max_iter<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>model.fit(X_train, y_train)</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Prédictions et évaluation</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test)</span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>accuracy <span class="op">=</span> accuracy_score(y_test, y_pred)</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>report <span class="op">=</span> classification_report(y_test, y_pred)</span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Accuracy: </span><span class="sc">{</span>accuracy<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Classification Report:"</span>)</span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(report)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Accuracy: 0.6362053959965187
Classification Report:
              precision    recall  f1-score   support

           0       0.63      0.80      0.71       632
           1       0.64      0.44      0.52       517

    accuracy                           0.64      1149
   macro avg       0.64      0.62      0.61      1149
weighted avg       0.64      0.64      0.62      1149
</code></pre>
</div>
</div>
<div id="cell-87" class="cell" data-execution_count="197">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> sm.Logit(y_train, X_train)</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> model.fit(maxiter<span class="op">=</span><span class="dv">1000</span>)</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Afficher le résumé du modèle</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(result.summary())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Optimization terminated successfully.
         Current function value: 0.662517
         Iterations 5
                           Logit Regression Results                           
==============================================================================
Dep. Variable:              CATEGORIE   No. Observations:                 4595
Model:                          Logit   Df Residuals:                     4590
Method:                           MLE   Df Model:                            4
Date:                Sat, 02 Nov 2024   Pseudo R-squ.:                 0.03429
Time:                        14:45:34   Log-Likelihood:                -3044.3
converged:                       True   LL-Null:                       -3152.4
Covariance Type:            nonrobust   LLR p-value:                 1.219e-45
==================================================================================
                     coef    std err          z      P&gt;|z|      [0.025      0.975]
----------------------------------------------------------------------------------
CITE              -0.0592      0.007     -8.939      0.000      -0.072      -0.046
SEXE               0.1462      0.112      1.300      0.194      -0.074       0.367
INDEPOUSE         -0.4444      0.091     -4.881      0.000      -0.623      -0.266
ENFANT            -0.0894      0.013     -6.930      0.000      -0.115      -0.064
age_engagement     0.0140      0.003      4.672      0.000       0.008       0.020
==================================================================================</code></pre>
</div>
</div>
<p><strong>Remarque</strong> :</p>
<p>SI même en rétirant le salaire pers, on ne parvenait pas à raisoudre le problème, On devrait passer à d’autres pistes de solution, comme :</p>
<ul>
<li>Ajout d’une régularisation : cas de la régression logistique avec régularisation (comme Ridge ou Lasso)</li>
<li>Réaliser l’AFDM (Analyse Factorielle Des Données Mixtes), afin de détecter les variables les plus corrélées avec la catégorie de lemployé, puis les éliminer.</li>
</ul>
</section>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>